

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The misc API &mdash; pygridtools 0.3.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="The iotools API" href="iotools.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> pygridtools
          

          
          </a>

          
            
            
              <div class="version">
                0.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/01_GridgenBasics.html">Grid Generation Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/02_ShapefilesAndCellMasks.html">Masking grid cells</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/03_MergingSpliting.html">Grid Manipulations (merge, split, refine, transform)</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="core.html">The <cite>core</cite> API</a></li>
<li class="toctree-l1"><a class="reference internal" href="iotools.html">The <cite>iotools</cite> API</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The <cite>misc</cite> API</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pygridtools</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>The <cite>misc</cite> API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/misc.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast,
.nboutput.nblast {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast + .nbinput {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}
</style>
<div class="section" id="module-pygridtools.misc">
<span id="the-misc-api"></span><span id="misc-auto"></span><h1>The <cite>misc</cite> API<a class="headerlink" href="#module-pygridtools.misc" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="pygridtools.misc.make_poly_coords">
<code class="descclassname">pygridtools.misc.</code><code class="descname">make_poly_coords</code><span class="sig-paren">(</span><em>xarr</em>, <em>yarr</em>, <em>zpnt=None</em>, <em>triangles=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pygridtools/misc.html#make_poly_coords"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pygridtools.misc.make_poly_coords" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes an array for coordinates suitable for building
quadrilateral geometries in shapfiles via fiona.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>xarr, yarr</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy arrays</span></dt>
<dd><p class="first last">Arrays (2x2) of x coordinates and y coordinates for each vertex
of the quadrilateral.</p>
</dd>
<dt><strong>zpnt</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optional float or None (default)</span></dt>
<dd><p class="first last">If provided, this elevation value will be assigned to all four
vertices.</p>
</dd>
<dt><strong>triangles</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optional bool (default = False)</span></dt>
<dd><p class="first last">If True, triangles will be returned</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>coords</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy array</span></dt>
<dd><p class="first last">An array suitable for feeding into fiona as the geometry of a record.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pygridtools.misc.make_record">
<code class="descclassname">pygridtools.misc.</code><code class="descname">make_record</code><span class="sig-paren">(</span><em>ID</em>, <em>coords</em>, <em>geomtype</em>, <em>props</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pygridtools/misc.html#make_record"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pygridtools.misc.make_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a record to be appended to a GIS file via <em>geopandas</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>ID</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><p class="first last">The record ID number</p>
</dd>
<dt><strong>coords</strong> <span class="classifier-delimiter">:</span> <span class="classifier">tuple or array-like</span></dt>
<dd><p class="first last">The x-y coordinates of the geometry. For Points, just a tuple.
An array or list of tuples for LineStrings or Polygons</p>
</dd>
<dt><strong>geomtype</strong> <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first last">A valid GDAL/OGR geometry specification (e.g. LineString, Point,
Polygon)</p>
</dd>
<dt><strong>props</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict or collections.OrderedDict</span></dt>
<dd><p class="first last">A dict-like object defining the attributes of the record</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>record</strong> <span class="classifier-delimiter">:</span> <span class="classifier">dict</span></dt>
<dd><p class="first last">A nested dictionary suitable for the a <em>geopandas.GeoDataFrame</em>,</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>This is ignore the mask of a MaskedArray. That might be bad.</p>
</dd></dl>

<dl class="function">
<dt id="pygridtools.misc.interpolate_bathymetry">
<code class="descclassname">pygridtools.misc.</code><code class="descname">interpolate_bathymetry</code><span class="sig-paren">(</span><em>bathy</em>, <em>x_points</em>, <em>y_points</em>, <em>xcol='x'</em>, <em>ycol='y'</em>, <em>zcol='z'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pygridtools/misc.html#interpolate_bathymetry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pygridtools.misc.interpolate_bathymetry" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolates x-y-z point data onto the grid of a Gridgen object.
Matplotlib’s nearest-neighbor interpolation schema is used to
estimate the elevation at the grid centers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>bathy</strong> <span class="classifier-delimiter">:</span> <span class="classifier">pandas.DataFrame or None</span></dt>
<dd><p class="first last">The bathymetry data stored as x-y-z points in a DataFrame.</p>
</dd>
<dt><strong>[x|y]_points</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy arrays</span></dt>
<dd><p class="first last">The x, y locations onto which the bathymetry will be
interpolated.</p>
</dd>
<dt><strong>xcol/ycol/zcol</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optional strings</span></dt>
<dd><p class="first last">Column names for each of the quantities defining the elevation
pints. Defaults are “x/y/z”.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>gridbathy</strong> <span class="classifier-delimiter">:</span> <span class="classifier">pandas.DataFrame</span></dt>
<dd><p class="first last">The bathymetry for just the area covering the grid.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pygridtools.misc.padded_stack">
<code class="descclassname">pygridtools.misc.</code><code class="descname">padded_stack</code><span class="sig-paren">(</span><em>a</em>, <em>b</em>, <em>how='vert'</em>, <em>where='+'</em>, <em>shift=0</em>, <em>padval=nan</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pygridtools/misc.html#padded_stack"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pygridtools.misc.padded_stack" title="Permalink to this definition">¶</a></dt>
<dd><p>Merge 2-dimensional numpy arrays with different shapes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>a, b</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy arrays</span></dt>
<dd><p class="first last">The arrays to be merged</p>
</dd>
<dt><strong>how</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optional string (default = ‘vert’)</span></dt>
<dd><p class="first last">The method through wich the arrays should be stacked. <cite>‘Vert’</cite>
is analogous to <cite>numpy.vstack</cite>. <cite>‘Horiz’</cite> maps to <cite>numpy.hstack</cite>.</p>
</dd>
<dt><strong>where</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optional string (default = ‘+’)</span></dt>
<dd><p class="first">The placement of the arrays relative to each other. Keeping in
mind that the origin of an array’s index is in the upper-left
corner, <cite>‘+’</cite> indicates that the second array will be placed
at higher index relative to the first array. Essentially:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>if how == ‘vert’</dt>
<dd><ul class="first last">
<li><cite>‘+’</cite> -&gt; <cite>a</cite> is above (higher index) <cite>b</cite></li>
<li><cite>‘-‘</cite> -&gt; <cite>a</cite> is below (lower index) <cite>b</cite></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>if how == ‘horiz’</dt>
<dd><ul class="first last">
<li><cite>‘+’</cite> -&gt; <cite>a</cite> is to the left of <cite>b</cite></li>
<li><cite>‘-‘</cite> -&gt; <cite>a</cite> is to the right of <cite>b</cite></li>
</ul>
</dd>
</dl>
</li>
</ul>
<p class="last">See the examples for more info.</p>
</dd>
<dt><strong>shift</strong> <span class="classifier-delimiter">:</span> <span class="classifier">int (default = 0)</span></dt>
<dd><p class="first last">The number of indices the second array should be shifted in
axis other than the one being merged. In other words, vertically
stacked arrays can be shifted horizontally, and horizontally
stacked arrays can be shifted vertically.</p>
</dd>
<dt><strong>padval</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optional, same type as array (default = numpy.nan)</span></dt>
<dd><p class="first last">Value with which the arrays will be padded.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>Stacked</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy array</span></dt>
<dd><p class="first last">The merged and padded array</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pygridtools</span> <span class="k">as</span> <span class="nn">pgt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span> <span class="o">*</span> <span class="o">-</span><span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pgt</span><span class="o">.</span><span class="n">padded_stack</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;vert&#39;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">shift</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="go">array([[ 0.,  1.,  2.,   -,   -,   -],</span>
<span class="go">       [ 3.,  4.,  5.,   -,   -,   -],</span>
<span class="go">       [ 6.,  7.,  8.,   -,   -,   -],</span>
<span class="go">       [ 9., 10., 11.,   -,   -,   -],</span>
<span class="go">       [  -,   -, -0., -1., -2., -3.],</span>
<span class="go">       [  -,   -, -4., -5., -6., -7.]])</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pgt</span><span class="o">.</span><span class="n">padded_stack</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;h&#39;</span><span class="p">,</span> <span class="n">where</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">shift</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="go">array([[-0., -1., -2., -3.,   -,   -,   -],</span>
<span class="go">       [-4., -5., -6., -7.,  0.,  1.,  2.],</span>
<span class="go">       [  -,   -,   -,   -,  3.,  4.,  5.],</span>
<span class="go">       [  -,   -,   -,   -,  6.,  7.,  8.],</span>
<span class="go">       [  -,   -,   -,   -,  9., 10., 11.]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="pygridtools.misc.mask_with_polygon">
<code class="descclassname">pygridtools.misc.</code><code class="descname">mask_with_polygon</code><span class="sig-paren">(</span><em>x</em>, <em>y</em>, <em>polyverts</em>, <em>inside=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pygridtools/misc.html#mask_with_polygon"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pygridtools.misc.mask_with_polygon" title="Permalink to this definition">¶</a></dt>
<dd><p>Mask x-y arrays inside or outside a polygon</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>x, y</strong> <span class="classifier-delimiter">:</span> <span class="classifier">array-like</span></dt>
<dd><p class="first last">NxM arrays of x- and y-coordinates.</p>
</dd>
<dt><strong>polyverts</strong> <span class="classifier-delimiter">:</span> <span class="classifier">sequence of a polygon’s vertices</span></dt>
<dd><p class="first last">A sequence of x-y pairs for each vertex of the polygon.</p>
</dd>
<dt><strong>inside</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool (default is True)</span></dt>
<dd><p class="first last">Toggles masking the inside or outside the polygon</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">bool array</span></dt>
<dd><p class="first last">The NxM mask that can be applied to <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code>.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="pygridtools.misc.make_gefdc_cells">
<code class="descclassname">pygridtools.misc.</code><code class="descname">make_gefdc_cells</code><span class="sig-paren">(</span><em>node_mask</em>, <em>cell_mask=None</em>, <em>triangles=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/pygridtools/misc.html#make_gefdc_cells"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pygridtools.misc.make_gefdc_cells" title="Permalink to this definition">¶</a></dt>
<dd><p>Take an array defining the nodes as wet (1) or dry (0) create
the array of cell values needed for GEFDC.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><dl class="first docutils">
<dt><strong>node_mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy bool array (N x M)</span></dt>
<dd><p class="first last">Bool array specifying if a <em>node</em> is present in the raw
(unmasked) grid.</p>
</dd>
<dt><strong>cell_mask</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optional numpy bool array (N-1 x M-1) or None (default)</span></dt>
<dd><p class="first last">Bool array specifying if a cell should be masked (e.g. due to
being an island or something like that).</p>
</dd>
<dt><strong>triangles</strong> <span class="classifier-delimiter">:</span> <span class="classifier">optional bool (default = False)</span></dt>
<dd><p class="first last">Currently not implemented. Will eventually enable the writting of
triangular cells when True.</p>
</dd>
</dl>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><dl class="first last docutils">
<dt><strong>cell_array</strong> <span class="classifier-delimiter">:</span> <span class="classifier">numpy array</span></dt>
<dd><p class="first last">Integer array of the values written to <code class="docutils literal notranslate"><span class="pre">outfile</span></code>.</p>
</dd>
</dl>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="iotools.html" class="btn btn-neutral" title="The iotools API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016 - 2018, Paul Hobson.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.3.0',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>